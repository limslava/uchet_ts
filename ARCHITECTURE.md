# Архитектура системы Uchet_TS

## 📊 Обзор системы
Многоуровневая архитектура с кэшированием на всех уровнях

## 🔧 Компонентная диаграмма
┌─────────────────┐ REST API ┌──────────────────┐
│ React │ ◄─────────────►│ Express.js │
│ Frontend │ │ Backend │
│ │ │ │
│ - Кэш запросов │ │ - Кэш аутентиф. │
│ (5 секунд) │ │ (5 минут) │
└─────────────────┘ └─────────┬────────┘
│
Prisma ORM│
│
┌───────▼───────┐
│ PostgreSQL │
│ Database │
└───────────────┘

text

## 🧩 Модульная структура

### Frontend (React 19+)
- **Components** - Переиспользуемые UI компоненты
- **Pages** - Страницы приложения
- **Services** - API функции и бизнес-логика
- **Hooks** - Кастомные React хуки

### Backend (Node.js + Express) - МОДУЛЬНАЯ
- **Controllers** - Логика обработки запросов
- **Routes** - Маршруты API
- **Middleware** - Аутентификация, валидация
- **Services** - Бизнес-логика и утилиты

## ⚠️ Текущие архитектурные проблемы
1. **Отсутствующие эндпоинты** - не реализованы ключевые маршруты
2. **Проблемы с данными** - не отображаются фотографии и комплектация
3. **Интеграционные проблемы** - ошибки при обновлении актов

## 🎯 Планы по исправлению
### Высокий приоритет:
1. Реализация эндпоинта выдачи ТС
2. Исправление ошибки 500 при обновлении
3. Восстановление отображения фотографий

### Средний приоритет:
4. Добавление валидации новых полей
5. Оптимизация производительности панели админа

**Версия архитектуры:** 2.1.0 | **Обновлено:** 2025-09-14

## 🚢 Модуль отгрузки контейнеров
- **ContainerStuffing** - Интерфейс отгрузки в контейнеры
- **Multi QR-scanning** - Поддержка множественного сканирования
- **Location validation** - Проверка локации приемосдатчика

# Архитектура системы Uchet_TS

## 📊 Обзор системы
Многоуровневая архитектура с кэшированием на всех уровнях

## ✅ Решенные архитектурные проблемы
1. **Эндпоинт выдачи ТС** - реализован `POST /vehicle-acts/:id/issue`
2. **Модуль отгрузки контейнеров** - полная интеграция
3. **Проверка локаций** - валидация перед отгрузкой

## 🚢 Модуль отгрузки контейнеров
- **Multi QR-scanning** - Множественное сканирование
- **Location validation** - Проверка локаций в реальном времени  
- **Container management** - Интеграция со справочником контейнеров
- **Status management** - Автоматическое обновление статусов

## 🔧 Оптимизации
- Кэширование запросов контейнеров (5 секунд)
- Мемоизация компонентов сканирования
- Валидация данных перед отправкой

**Версия архитектуры:** 2.2.0 | **Обновлено:** 2025-09-16